# ========================================
# RAILWAY PRODUCTION ENVIRONMENT CONFIG
# Complete Configuration for AI Chatbot Platform
# ========================================

# ==========================================
# CORE DATABASE CONFIGURATION (SUPABASE)
# ==========================================
DATABASE_URL=postgresql://postgres.ompjkiiabyuegytncbwq:STEfanjohn!12@aws-0-eu-north-1.pooler.supabase.com:6543/postgres
SUPABASE_URL=https://ompjkiiabyuegytncbwq.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9tcGpraWlhYnl1ZWd5dG5jYndxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4NDg2MjYsImV4cCI6MjA2ODQyNDYyNn0.z9j2pwMfKjfR9Fs__fHkzwj9fjgiNOUQZ5Z9zv5FD6Q

# ==========================================
# APPLICATION CORE SETTINGS
# ==========================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# ==========================================
# SECURITY CONFIGURATION
# ==========================================
SECRET_KEY=your-super-secret-railway-key-2024-enterprise
JWT_SECRET_KEY=your-jwt-secret-railway-key-2024-enterprise
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==========================================
# ADMIN CONFIGURATION
# ==========================================
ADMIN_USERNAME=stefan@axiestudio.se
ADMIN_PASSWORD=STEfanjohn!12
ADMIN_EMAIL=stefan@axiestudio.se

# ==========================================
# API CONFIGURATION
# ==========================================
API_V1_STR=/api/v1
API_TITLE=AI Chatbot Platform
API_VERSION=1.0.0
API_DESCRIPTION=Enterprise AI Chatbot Platform with Admin Panel

# ==========================================
# CORS & SECURITY SETTINGS
# ==========================================
ALLOWED_ORIGINS=https://*.railway.app,https://yourdomain.com
ALLOWED_HOSTS=*.railway.app,localhost
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# ==========================================
# CACHING CONFIGURATION (SUPABASE-BASED)
# ==========================================
ENABLE_CACHING=true
CACHE_BACKEND=supabase
CACHE_NAMESPACE=chatbot_prod
CACHE_DEFAULT_TTL=300

# Cache TTL Settings (seconds)
CACHE_TTL_LIVE_CONFIG=300
CACHE_TTL_API_CONFIG=600
CACHE_TTL_RAG_CONFIG=600
CACHE_TTL_USER_SESSION=3600
CACHE_TTL_CHAT_HISTORY=1800
CACHE_TTL_HEALTH_CHECK=30
CACHE_TTL_ANALYTICS=900

# ==========================================
# SESSION CONFIGURATION (SUPABASE-BASED)
# ==========================================
SESSION_BACKEND=supabase
SESSION_TIMEOUT=3600
SESSION_CLEANUP_INTERVAL=3600

# ==========================================
# AI PROVIDER CONFIGURATION
# ==========================================
# NOTE: AI keys are configured in admin panel by users
# These are fallback/default keys (optional)
AI_FEATURES_ENABLED=true
AI_PROVIDER_FALLBACK_ENABLED=false
# OPENAI_API_KEY=sk-your-fallback-openai-key
# ANTHROPIC_API_KEY=your-fallback-anthropic-key

# AI Model Defaults
DEFAULT_OPENAI_MODEL=gpt-3.5-turbo
DEFAULT_ANTHROPIC_MODEL=claude-3-sonnet-20240229
AI_MAX_TOKENS=4000
AI_TEMPERATURE=0.7

# ==========================================
# RATE LIMITING CONFIGURATION
# ==========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10
RATE_LIMIT_STORAGE=supabase

# ==========================================
# SECURITY FEATURES
# ==========================================
SECURITY_HEADERS_ENABLED=true
CONTENT_SECURITY_POLICY_ENABLED=true
CSRF_PROTECTION_ENABLED=true
XSS_PROTECTION_ENABLED=true

# ==========================================
# MONITORING & ANALYTICS
# ==========================================
ENABLE_METRICS=true
METRICS_ENDPOINT=/metrics
HEALTH_CHECK_ENDPOINT=/health
PERFORMANCE_MONITORING_ENABLED=true

# ==========================================
# CHAT CONFIGURATION
# ==========================================
CHAT_MAX_HISTORY_LENGTH=50
CHAT_SESSION_TIMEOUT=3600
CHAT_MAX_MESSAGE_LENGTH=4000
CHAT_ENABLE_TYPING_INDICATORS=true
CHAT_ENABLE_MESSAGE_REACTIONS=true

# ==========================================
# FILE UPLOAD CONFIGURATION
# ==========================================
MAX_UPLOAD_SIZE=10485760
ALLOWED_FILE_TYPES=txt,pdf,docx,md
UPLOAD_STORAGE=supabase
UPLOAD_VIRUS_SCAN_ENABLED=false

# ==========================================
# RAG CONFIGURATION
# ==========================================
RAG_ENABLED=true
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200
RAG_MAX_CHUNKS=10
RAG_SIMILARITY_THRESHOLD=0.7
EMBEDDING_MODEL=text-embedding-ada-002

# ==========================================
# WEBSOCKET CONFIGURATION
# ==========================================
WEBSOCKET_ENABLED=true
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_HEARTBEAT_INTERVAL=30

# ==========================================
# BACKUP & MAINTENANCE
# ==========================================
AUTO_BACKUP_ENABLED=false
BACKUP_RETENTION_DAYS=30
MAINTENANCE_MODE=false

# ==========================================
# FEATURE FLAGS
# ==========================================
FEATURE_CHAT_EXPORT=true
FEATURE_CHAT_IMPORT=true
FEATURE_MULTI_LANGUAGE=true
FEATURE_VOICE_INPUT=false
FEATURE_VOICE_OUTPUT=false
FEATURE_SCREEN_SHARING=false

# ==========================================
# ADVANCED FEATURES (DISABLED FOR STABILITY)
# ==========================================
ENABLE_TRACING=false
AI_SCALING_ENABLED=false
SECURITY_INTELLIGENCE_ENABLED=false
ADVANCED_ANALYTICS_ENABLED=false
CONVERSATION_INTELLIGENCE_ENABLED=false
CONTENT_MODERATION_ENABLED=false
KNOWLEDGE_GRAPH_ENABLED=false
REALTIME_COLLABORATION_ENABLED=false

# ==========================================
# PERFORMANCE SETTINGS
# ==========================================
WORKERS=4
MAX_CONNECTIONS=1000
WORKER_TIMEOUT=30
KEEPALIVE_TIMEOUT=5
MAX_REQUESTS_PER_WORKER=1000

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_FORMAT=json
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30
LOG_SENSITIVE_DATA=false

# ==========================================
# TIMEZONE & LOCALIZATION
# ==========================================
TIMEZONE=UTC
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,sv,no,da,fi

# ==========================================
# DEVELOPMENT & TESTING
# ==========================================
TESTING_MODE=false
MOCK_AI_RESPONSES=false
DEMO_MODE=false

# ==========================================
# SUPABASE CACHE TABLE SETUP
# ==========================================
# Run this SQL in your Supabase SQL editor:
#
# CREATE TABLE IF NOT EXISTS cache_entries (
#     id SERIAL PRIMARY KEY,
#     cache_key VARCHAR(255) UNIQUE NOT NULL,
#     cache_type VARCHAR(50) NOT NULL DEFAULT 'default',
#     value JSONB NOT NULL,
#     expires_at TIMESTAMP WITH TIME ZONE NOT NULL,
#     created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
#     updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
# );
# 
# CREATE INDEX IF NOT EXISTS idx_cache_key ON cache_entries(cache_key);
# CREATE INDEX IF NOT EXISTS idx_cache_type ON cache_entries(cache_type);
# CREATE INDEX IF NOT EXISTS idx_cache_expires ON cache_entries(expires_at);
#
# CREATE TABLE IF NOT EXISTS user_sessions (
#     id SERIAL PRIMARY KEY,
#     session_id VARCHAR(255) UNIQUE NOT NULL,
#     user_id VARCHAR(255),
#     session_data JSONB NOT NULL DEFAULT '{}',
#     ip_address VARCHAR(45),
#     user_agent TEXT,
#     expires_at TIMESTAMP WITH TIME ZONE NOT NULL,
#     created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
#     updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
#     is_active BOOLEAN DEFAULT TRUE
# );
# 
# CREATE INDEX IF NOT EXISTS idx_session_id ON user_sessions(session_id);
# CREATE INDEX IF NOT EXISTS idx_user_id ON user_sessions(user_id);
# CREATE INDEX IF NOT EXISTS idx_session_expires ON user_sessions(expires_at);
# CREATE INDEX IF NOT EXISTS idx_session_active ON user_sessions(is_active);

# ==========================================
# DEPLOYMENT NOTES
# ==========================================
# 1. Copy these environment variables to Railway
# 2. Run the Supabase SQL setup above
# 3. Deploy and test health endpoint
# 4. Configure AI keys in admin panel
# 5. Test chat functionality
# ==========================================
